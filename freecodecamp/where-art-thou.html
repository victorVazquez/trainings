<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="text/javascript">
    function whatIsInAName(collection, source) {
      // var res = [];
      // var key = Object.keys(source);
      // // console.log(key);
      //
      // for (var name in collection) {
      //   // console.log(collection[name][key]);
      //   // console.log(source[key]);
      //   if (collection[name][key] === source[key]) {
      //     res.push(collection[name]);
      //   }
      // }
      //
      // console.log(res);


    // var check = true;
    // var arr = [];
    //
    // for(i=0; i < collection.length; i++){
    //   for (var prop in source){
    //     // console.log(prop);
    //     // console.log(collection[i].hasOwnProperty(prop));
    //     // console.log(collection[i]);
    //     // console.log(collection[i][prop]);
    //     // console.log(source[prop]);
    //     // console.log('-------------------------');
    //       if(collection[i].hasOwnProperty(prop) && collection[i][prop] == source[prop]){
    //           check = true;
    //       } else {
    //           check = false;
    //           break;
    //       }
    //   }
    //   if (check === true){
    //     arr.push(collection[i]);
    //   }
    // }

    // console.log('=====================================');
    // console.log(arr);
    // return arr;



    // var srcKeys = Object.keys(source);
    //
    //   // filter the collection
    //   return collection.filter(function (obj) {
    //     // return a Boolean value for filter callback using reduce method
    //     return srcKeys.reduce(function (res, key) {
    //       // reduce to Boolean value to be returned by reduce method
    //       return obj.hasOwnProperty(key) && obj[key] === source[key];
    //     }, false);
    //   });



    // var srcKeys = Object.keys(source);
    var sourceKeys = Object.keys(source);
    var sourceKeysLen = sourceKeys.length;
    var arr = [];

    collection.forEach(function (element) {
      for (var i=0; i < sourceKeysLen; i++) {
        if (!element.hasOwnProperty(sourceKeys[i]) || element[sourceKeys[i]]  !== source[sourceKeys[i]]) {
          return false;
        }
      }
      arr.push(element);
    });


    // filter the collection
    // var filterCollection = collection.filter(function (obj) {
    //   for(var i = 0; i < sourceKeysLen; i++) {
    //     // check if obj in collection doesn't have the key
    //     // or if it does have the key,
    //     // then check if the property value doesn't match the value in source
    //     if(!obj.hasOwnProperty(sourceKeys[i]) || obj[sourceKeys[i]] !== source[sourceKeys[i]]) {
    //       return false;
    //     }
    //   }
    //   arr.push(obj);
    //   return true;
    // });


    console.log(arr);

    }
    // whatIsInAName([{ first: "Romeo", last: "Montague" }, { first: "Mercutio", last: null }, { first: "Tybalt", last: "Capulet" }], { last: "Capulet" });
    // whatIsInAName([{ "a": 1 }, { "a": 1 }, { "a": 1, "b": 2 }], { "a": 1 });
    // whatIsInAName([{ "a": 1, "b": 2 }, { "a": 1 }, { "a": 1, "b": 2, "c": 2 }], { "a": 1, "b": 2 });
    whatIsInAName([{ "a": 1, "b": 2 }, { "a": 1 }, { "a": 1, "b": 2, "c": 2 }], { "a": 1, "c": 2 });
    </script>
  </body>
</html>
